<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<title>Réserver</title>
<style>
body{font-family:Arial;background:#111;color:#fff;text-align:center;padding:40px}
input,select,textarea{width:300px;padding:10px;margin:8px;border:none;border-radius:6px}
button{padding:12px 25px;background:gold;border:none;border-radius:6px;font-weight:bold;cursor:pointer}
</style>
</head>
<body>

<h1>Réservation</h1>

<form id="form">
  <input id="full_name" placeholder="Nom complet" required>
  <input id="phone" placeholder="Téléphone" required>
  <input id="email" placeholder="Email (optionnel)">

  <select id="service_type">
    <option value="vol">Vol</option>
    <option value="hotel">Hôtel</option>
    <option value="visa">Visa</option>
    <option value="voyage">Voyage organisé</option>
    <option value="assurance">Assurance</option>
    <option value="evisa">eVisa</option>
  </select>

  <input id="from_city" placeholder="Ville départ">
  <input id="to_city" placeholder="Destination">

  <label>Date départ</label><br>
  <input type="date" id="check_in"><br>

  <label>Date retour</label><br>
  <input type="date" id="check_out"><br>

  <input id="travelers" type="number" value="1" min="1">

  <textarea id="notes" placeholder="Notes"></textarea><br>

  <button type="submit">Valider et payer</button>
</form>

<script>
  // préselection service via ?service=visa etc.
  const p = new URLSearchParams(location.search);
  const s = p.get("service");
  if (s) document.getElementById("service_type").value = s;

  document.getElementById("form").addEventListener("submit", (e) => {
    e.preventDefault();

    const data = {
      full_name: full_name.value.trim(),
      phone: phone.value.trim(),
      email: email.value.trim(), // optionnel
      service_type: service_type.value,
      from_city: from_city.value.trim(),
      to_city: to_city.value.trim(),
      check_in: check_in.value || null,
      check_out: check_out.value || null,
      travelers: Number(travelers.value || 1),
      notes: notes.value.trim(),
      deposit_amount: 15,
      currency: "EUR",
      payment_method: "paypal"
    };

    localStorage.setItem("reservation", JSON.stringify(data));
    location.href = "paiement.html";
  });
</script>

</body>
</html>
